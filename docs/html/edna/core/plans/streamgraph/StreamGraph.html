<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>edna.core.plans.streamgraph.StreamGraph API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>edna.core.plans.streamgraph.StreamGraph</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from __future__ import annotations
from edna.core.plans.streamgraph import SingleOutputStreamGraphNode
from edna.exception import StreamGraphNodeDoesNotExistException
from typing import Dict, List

class StreamGraph:
    &#34;&#34;&#34;StreamGraph represents the logical plan for an Edna Job. It records SingleOutputStreamGraphNodes 
    and edges between these nodes. Each node is either a source node that ingests a stream 
    into the StreamGraph, a transformation that modifies the stream, or a sink that emits
    a stream.

    Attributes:
        node_list (List[SingleOutputStreamGraphNode]): This is the list of nodes in the StreamGraph. Each element 
            is a SingleOutputStreamGraphNode encapsulating the transformation callable.
        node_map (Dict[int, List[int]]): This is the representation of the StreamGraph DAG. Each entry 
            in the map is the index of the source node in `node_list`. The values are the list
            of indices of target nodes the source node connects to.
        leaf_list (Dict[int]): A list (technically a map for O(1) access) of node indices that point to nodes
            that are currently leaves in the StreamGraph.
        root_list (Dict[int]): A list of node indices that point to nodes that are currently roots 
            in the StreamGraph.
        empty_graph (bool): Set to `false` when initialized and updated to `true` when a node is added.
        node_head (int): Index of the last modified node in the graph. 
        node_id_to_node_idx_map (Dict[int,int]): A map to retrieve the index of a node in the `node_list`
            given the node&#39;s `node_id`
    &#34;&#34;&#34;
    # This will store the list of nodes
    node_list : List[SingleOutputStreamGraphNode]
    # Each time we add a connection, the node_map is updated for the current context through Datastream
    node_map : Dict[int,List[int]]
    # This is the list of current leaves in the graph
    leaf_list : Dict[int, int]
    # This is the list of roots in the graph
    root_list : List[int]
    empty_graph : bool = True
    # Index of node in node_list that is the current head of graph (things will be attached to this...)
    node_head : int = None
    node_id_to_node_idx_map: Dict[int,int]
    
    def __init__(self):
        &#34;&#34;&#34;Initialize the StreamGraph with empty `node_list`, `node_map`, and `leaf_list`.
        &#34;&#34;&#34;
        self.node_list = [] # Stores nodes
        self.node_map = {}  # node list idx -&gt; node list idx
        self.leaf_list = {} # node idx in node_list that are leaf
        self.root_list = [] # node idx in node_list that are roots
        self.node_id_to_node_idx_map = {}   # node id to node idx in node_list

    def addNode(self, node: SingleOutputStreamGraphNode):
        &#34;&#34;&#34;Add a new node to the StreamGraph and update the head to reference the new node. 
        Also add the node to the list of leafs in the StreamGraph. Updates the 
        `node_id_to_node_idx_map`, and also updates `root_list` if the node is an ingest.

        Args:
            node (SingleOutputStreamGraphNode): A SingleOutputStreamGraphNode instance.

        Raises:
            ValueError: Raised if the StreamGraph is empty and the node to be added is not an ingest node.
        &#34;&#34;&#34;
        # TODO make sure the first entry is a root...maybe datastream will manage this?
        if self.empty_graph:
            if not node.isIngest():
                raise ValueError(&#34;First node inserted into StreamGraph must be an ingest node&#34;)
        
        
        self.node_list.append(node)
        self.node_head = len(self.node_list) - 1
        
        self.empty_graph = False

        if node.isIngest():
            self.root_list.append(self.node_head)
        
        self.leaf_list[self.node_head] = 1
        self.node_id_to_node_idx_map[node.node_id] = self.node_head

    def addNodeToHead(self, node: StreamGraph):
        &#34;&#34;&#34;Add a node to the StreamGraph and create an edge to the new node from the current head.

        Args:
            node (StreamGraph): The node to add to the StreamGraph DAG
        &#34;&#34;&#34;
        previous_head = self.node_head
        self.addNode(node)
        self.addEdge(previous_head, self.getHeadNodeIndex())

    def addEdge(self, node1_idx : int, node2_idx: int):
        &#34;&#34;&#34;Add an edge to the StreamGraph between the nodes referenced by the Node Index

        Args:
            node1_idx (int): Index of the source node in `node_list`
            node2_idx (int): Index of the target node in `node_list`
        &#34;&#34;&#34;
        # TODO make sure node1 exists in the self.node_map
        self.checkNodeIndexInGraph(node1_idx)
        # Make sure node2 exists in node_list
        if not self.verifyNodeExistsByIndex(node2_idx):
            raise ValueError(&#34;Node must be added to StreamGraph before adding edge.&#34;)
        self._addEdge(node1_idx, node2_idx)

    def addPlaceholderEdge(self, node1_idx : int):
        &#34;&#34;&#34;Add an edge between provided node and a placeholder node

        Args:
            node1_idx (int): Index of the source node in `node_list``
        &#34;&#34;&#34;
        # TODO make sure node1 exists in the self.node_list
        self.checkNodeIndexInGraph(node1_idx)
        self._addPlaceholderEdge(node1_idx)

    def updatePlaceholderEdge(self, node1_idx : int, node2_idx: int, edge_idx: int):
        &#34;&#34;&#34;Update an existing placeholder edge with a correct edge

        Args:
            node1_idx (int): Index of the source node in `node_list``
        &#34;&#34;&#34;
        # TODO make sure node1 exists in the self.node_list
        self.checkNodeIndexInGraph(node1_idx)
        if not self.verifyNodeExistsByIndex(node2_idx):
            raise ValueError(&#34;Node must be added to StreamGraph before adding edge.&#34;)
        self._updatePlaceholderEdge(node1_idx, node2_idx, edge_idx)

    def _addEdge(self, node1_idx: int, node2_idx: int):
        &#34;&#34;&#34;Internal function to add the edge in StreamGraph. If the source node was a leaf, it is removed from the `leaf_list`.

        Args:
            node1_idx (int): The source node index.
            node2_idx (int): The target node index.

        Raises:
            ValueError: Raised if edge already exists.
        &#34;&#34;&#34;
        if node2_idx in self.node_map[node1_idx]:
            raise ValueError(&#34;Node {target_node_name} already exists as a connecton to Node {source_node_name}&#34;
                .format(target_node_name=self.node_list[node2_idx].name, 
                        source_node_name=self.node_list[node1_idx].name)
                        )
        if self.node_list[node1_idx].isEmit():
            raise RuntimeError(&#34;Cannot add a process node to an emit node. Add a new stream root first.&#34;)
        self.node_map[node1_idx].append(node2_idx)
        self.removeIfLeaf(node1_idx)

    def _addPlaceholderEdge(self, node_idx: int):
        &#34;&#34;&#34;Internal function to add a placeholder edge in StreamGraph.

        Args:
            node1_idx (int): The source node index.

        Raises:
            ValueError: Raised if edge already exists.
        &#34;&#34;&#34;
        if self.node_list[node_idx].isEmit():
            raise RuntimeError(&#34;Cannot add a process node to an emit node. Add a new stream root first.&#34;)
        self.node_map[node_idx].append(None)

    def _updatePlaceholderEdge(self, node1_idx: int, node2_idx : int, edge_idx : int):
        &#34;&#34;&#34;Internal function to update a placeholder edge in StreamGraph.

        Args:
            node1_idx (int): The source node index.

        Raises:
            ValueError: Raised if edge already exists.
        &#34;&#34;&#34;
        if node2_idx in self.node_map[node1_idx]:
            raise ValueError(&#34;Node {target_node_name} already exists as a connecton to Node {source_node_name}&#34;
                .format(target_node_name=self.node_list[node2_idx].name, 
                        source_node_name=self.node_list[node1_idx].name)
                        )
        if self.node_list[node1_idx].isEmit():
            raise RuntimeError(&#34;Cannot add a process node to an emit node. Add a new stream root first.&#34;)
        self.node_map[node1_idx][edge_idx] = node2_idx
        self.removeIfLeaf(node1_idx)

    # Get node by the head
    def getHeadNodeIndex(self):
        &#34;&#34;&#34;Gets the index of the current head of the StreamGraph

        Returns:
            (int): The index of the current head of the StreamGraph
        &#34;&#34;&#34;
        return self.node_head

    def getNodeByIndex(self, node_idx):
        &#34;&#34;&#34;Get a node from `node_list` at the given `node_idx`

        Args:
            node_idx (int): The index of the node to retrieve from `node_list`

        Returns:
            SingleOutputStreamGraphNode: Returns the node at `node_idx` in `node_list`
        &#34;&#34;&#34;
        return self.node_list[node_idx]

    def getNodeIndexByNodeName(self, name: str):
        &#34;&#34;&#34;Get a node index from `node_list` given the name of the node and sets the current head to this node.

        Args:
            name (str): The name of the node to retrieve from `node_list`

        Raises:
            SingleOutputStreamGraphNodeDoesNotExistException: If the requested node does not exist in `node_list`

        Returns:
            int: Returns the node index with the name matching the requested name.
        &#34;&#34;&#34;
        self.setNodeHeadByName(node_name=name)
        return self.getHeadNodeIndex()

    def getNodeIndexByNodeId(self, node_id: int):
        &#34;&#34;&#34;Get a node index from `node_list` given the id of the node and sets the current head to this node.

        Args:
            node_id (int): The id of the node to retrieve from `node_list`

        Raises:
            StreamGraphNodeDoesNotExistException: If the requested node does not exist in `node_list`

        Returns:
            int: Returns the node index with the id matching the requested id.
        &#34;&#34;&#34;
        self.setNodeHeadById(node_id=node_id)
        return self.getHeadNodeIndex()
    
    def setNodeHeadByName(self, node_name: str):
        node_idx = None
        for idx, node in enumerate(self.node_list):
            if node.name == node_name:
                node_idx = idx
                break
        if node_idx is None:
            raise StreamGraphNodeDoesNotExistException(name=node_name)
        self.node_head = node_idx

    def setNodeHeadById(self, node_id: int):
        node_idx = self.node_id_to_node_idx_map.get(node_id,None)
        &#34;&#34;&#34;
        for idx, node in enumerate(self.node_list):
            if node.node_id == node_id:
                node_idx = idx
                break
        &#34;&#34;&#34;
        if node_idx is None:
            raise StreamGraphNodeDoesNotExistException(node_id==node_id)
        self.node_head = node_idx

    def checkNodeIndexInGraph(self, node_idx: int):
        &#34;&#34;&#34;Check if the given index exists in the `node_list` and in the `node_map` Map.

        Args:
            node_idx (int): The index of the node to check in `node_list`
        &#34;&#34;&#34;
        if not self.verifyNodeExistsByIndex(node_idx):
            raise ValueError(&#34;Node must be added to StreamGraph before adding edge.&#34;)
        if node_idx not in self.node_map:
            self.addVertex(node_idx)
        
    def verifyNodeExistsByIndex(self, node_idx: int):
        &#34;&#34;&#34;Check if the given  node_idx is actually inside the `node_list`

        Args:
            node_idx (int): The index of the node to check.

        Raises:
            ValueError: Raised if the size of `node_list` is smaller than the `node_idx`
        &#34;&#34;&#34;
        return len(self.node_list)-1 &gt;= node_idx

    def verifyNodeExistsById(self, node_id: int) -&gt; bool:
        &#34;&#34;&#34;Verifies if a node with the provided `node_id` exists in the StreamGraph.

        Args:
            node_id (int): The node id to check.

        Returns:
            (bool): Whether the desired node exists
        &#34;&#34;&#34;
        return node_id in self.node_id_to_node_idx_map

    def verifyNodeExistsByName(self, node_name: str) -&gt; bool:
        &#34;&#34;&#34;Verifies if a node with the provided `name` exists in the StreamGraph.

        Args:
            node_name (str): The node name to check

        Returns:
            bool: Whether the desired node exists
        &#34;&#34;&#34;
        node_idx = None
        for idx, node in enumerate(self.node_list):
            if node.name == node_name:
                return True
        return False

    def addVertex(self, node_idx: int):
        &#34;&#34;&#34;Adds a `node_idx` to the `node_map` with an empty edge list.

        Args:
            node_idx (int): The index of the node to add to the `node_map`
        &#34;&#34;&#34;
        self.node_map[node_idx] = []


    def isLeaf(self, node_idx: int) -&gt; bool:
        &#34;&#34;&#34;Checks if the given index is of a leaf node.

        Args:
            node_idx (int): The node index to check

        Returns:
            (bool): Returns if `node_idx` refers to a leaf node.
        &#34;&#34;&#34;
        return node_idx in self.leaf_list

    def removeIfLeaf(self, node_idx: int):
        &#34;&#34;&#34;Remove a node from `leaf_list` if it is a leaf.

        Args:
            node_idx (int): The node index to remove.
        &#34;&#34;&#34;
        if self.isLeaf(node_idx=node_idx):
            self.deleteLeaf(node_idx=node_idx)

    def deleteLeaf(self, node_idx: int):
        &#34;&#34;&#34;Remove a leaf node from `leaf_list`

        Args:
            node_idx (int): The node index to remove.
        &#34;&#34;&#34;
        self.leaf_list.pop(node_idx)

    def verifyGraph(self) -&gt; bool:
        &#34;&#34;&#34;Verify the graph, ensuring all leaf nodes are Emit Nodes.

        Returns:
            bool: Returns True if the StreamGraph is a valid stream graph.
        &#34;&#34;&#34;
        leaf_verify = True
        for node_idx in self.leaf_list:
            if not self.node_list[node_idx].isEmit():
                leaf_verify = False

        return leaf_verify


    # Node operations
    def setNodeNameById(self, node_id : int, node_name: str):
        &#34;&#34;&#34;Sets the name of a node, referenced by the node id.

        Args:
            node_id (int): The node id to target
            node_name (str): The new name for this node
        &#34;&#34;&#34;
        self.setNodeNameByIndex(node_index=self.getNodeIndexByNodeId(node_id=node_id), node_name=node_name)

    def setNodeNameOfHead(self, node_name: str):
        &#34;&#34;&#34;Set the name of the head node.

        Args:
            node_name (str): The new name for the head node
        &#34;&#34;&#34;
        self.setNodeNameByIndex(self.getHeadNodeIndex(), node_name=node_name)
    
    def setNodeNameByIndex(self, node_index : int, node_name: str):
        &#34;&#34;&#34;Sets the name of a node, referenced by the node index.

        Args:
            node_index (int): The node index to target
            node_name (str): The new name for this node
        &#34;&#34;&#34;
        self.node_list[node_index].setName(node_name)

    def getNodeNameById(self, node_id: int) -&gt; str:
        &#34;&#34;&#34;Get the name of a node referenced by the node id

        Args:
            node_id (int): The id of the target node.

        Returns:
            str: The name of the node
        &#34;&#34;&#34;
        return self.getNodeNameByIndex(self.getNodeIndexByNodeId(node_id=node_id))

    def getNodeNameOfHead(self) -&gt; str:
        &#34;&#34;&#34;Get the name of the head node

        Returns:
            str: [description]
        &#34;&#34;&#34;
        return self.getNodeNameByIndex(self.getHeadNodeIndex())

    def getNodeNameByIndex(self, node_index: int) -&gt; str:
        &#34;&#34;&#34;Get the name of a node referenced by the node indedx

        Args:
            node_index (int): The index of the target node.

        Returns:
            str: The name of the node
        &#34;&#34;&#34;
        return self.node_list[node_index].getName()


    def getHeadNode(self) -&gt; SingleOutputStreamGraphNode:
        &#34;&#34;&#34;Get the current head node.

        Returns:
            SingleOutputStreamGraphNode: The desired node
        &#34;&#34;&#34;
        return self.node_list[self.node_head]
    
    def getNodeByIndex(self, node_index : int) -&gt; SingleOutputStreamGraphNode:
        &#34;&#34;&#34;Get a node referenced by the node index

        Args:
            node_index (int): The index of the node to retrieve

        Returns:
            SingleOutputStreamGraphNode: The desired node
        &#34;&#34;&#34;
        return self.node_list[node_index]

    def getNodeById(self, node_id : int) -&gt; SingleOutputStreamGraphNode:
        &#34;&#34;&#34;Get a node referenced by the node id

        Args:
            node_id (int): The id of the node to retrieve

        Returns:
            SingleOutputStreamGraphNode: The desired node
        &#34;&#34;&#34;
        return self.getNodeByIndex(self.getNodeIndexByNodeId(node_id=node_id))

    def getNodeByName(self, node_name: str) -&gt; SingleOutputStreamGraphNode:
        &#34;&#34;&#34;Get a node referenced by the node name

        Args:
            node_name (str): The name of the node to retrieve

        Returns:
            SingleOutputStreamGraphNode: The desired node
        &#34;&#34;&#34;
        return self.getNodeByIndex(self.getNodeIndexByNodeName(node_name))

    
    def getEdgesForNodeId(self, node_id: int) -&gt; List[int]:
        &#34;&#34;&#34;Gets the edges for a node referencced by the node id

        Args:
            node_id (int): The id of the node to get the edges for.

        Returns:
            List[int]: The list of target nodes of this source node.
        &#34;&#34;&#34;
        return self.getEdgesForNodeIdx(self.getNodeIndexByNodeId(node_id))

    def getEdgesForNodeIdx(self, node_idx: int) -&gt; List[int]:
        &#34;&#34;&#34;Gets the edges for a node referencced by the node index

        Args:
            node_idx (int): The index of the node to get the edges for.

        Returns:
            List[int]: The list of target nodes of this source node.
        &#34;&#34;&#34;
        return self.node_map.get(node_idx,[])</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph"><code class="flex name class">
<span>class <span class="ident">StreamGraph</span></span>
</code></dt>
<dd>
<div class="desc"><p>StreamGraph represents the logical plan for an Edna Job. It records SingleOutputStreamGraphNodes
and edges between these nodes. Each node is either a source node that ingests a stream
into the StreamGraph, a transformation that modifies the stream, or a sink that emits
a stream.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>node_list</code></strong> :&ensp;<code>List[SingleOutputStreamGraphNode]</code></dt>
<dd>This is the list of nodes in the StreamGraph. Each element
is a SingleOutputStreamGraphNode encapsulating the transformation callable.</dd>
<dt><strong><code>node_map</code></strong> :&ensp;<code>Dict[int, List[int]]</code></dt>
<dd>This is the representation of the StreamGraph DAG. Each entry
in the map is the index of the source node in <code>node_list</code>. The values are the list
of indices of target nodes the source node connects to.</dd>
<dt><strong><code>leaf_list</code></strong> :&ensp;<code>Dict[int]</code></dt>
<dd>A list (technically a map for O(1) access) of node indices that point to nodes
that are currently leaves in the StreamGraph.</dd>
<dt><strong><code>root_list</code></strong> :&ensp;<code>Dict[int]</code></dt>
<dd>A list of node indices that point to nodes that are currently roots
in the StreamGraph.</dd>
<dt><strong><code>empty_graph</code></strong> :&ensp;<code>bool</code></dt>
<dd>Set to <code>false</code> when initialized and updated to <code>true</code> when a node is added.</dd>
<dt><strong><code>node_head</code></strong> :&ensp;<code>int</code></dt>
<dd>Index of the last modified node in the graph. </dd>
<dt><strong><code>node_id_to_node_idx_map</code></strong> :&ensp;<code>Dict[int,int]</code></dt>
<dd>A map to retrieve the index of a node in the <code>node_list</code>
given the node's <code>node_id</code></dd>
</dl>
<p>Initialize the StreamGraph with empty <code>node_list</code>, <code>node_map</code>, and <code>leaf_list</code>.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class StreamGraph:
    &#34;&#34;&#34;StreamGraph represents the logical plan for an Edna Job. It records SingleOutputStreamGraphNodes 
    and edges between these nodes. Each node is either a source node that ingests a stream 
    into the StreamGraph, a transformation that modifies the stream, or a sink that emits
    a stream.

    Attributes:
        node_list (List[SingleOutputStreamGraphNode]): This is the list of nodes in the StreamGraph. Each element 
            is a SingleOutputStreamGraphNode encapsulating the transformation callable.
        node_map (Dict[int, List[int]]): This is the representation of the StreamGraph DAG. Each entry 
            in the map is the index of the source node in `node_list`. The values are the list
            of indices of target nodes the source node connects to.
        leaf_list (Dict[int]): A list (technically a map for O(1) access) of node indices that point to nodes
            that are currently leaves in the StreamGraph.
        root_list (Dict[int]): A list of node indices that point to nodes that are currently roots 
            in the StreamGraph.
        empty_graph (bool): Set to `false` when initialized and updated to `true` when a node is added.
        node_head (int): Index of the last modified node in the graph. 
        node_id_to_node_idx_map (Dict[int,int]): A map to retrieve the index of a node in the `node_list`
            given the node&#39;s `node_id`
    &#34;&#34;&#34;
    # This will store the list of nodes
    node_list : List[SingleOutputStreamGraphNode]
    # Each time we add a connection, the node_map is updated for the current context through Datastream
    node_map : Dict[int,List[int]]
    # This is the list of current leaves in the graph
    leaf_list : Dict[int, int]
    # This is the list of roots in the graph
    root_list : List[int]
    empty_graph : bool = True
    # Index of node in node_list that is the current head of graph (things will be attached to this...)
    node_head : int = None
    node_id_to_node_idx_map: Dict[int,int]
    
    def __init__(self):
        &#34;&#34;&#34;Initialize the StreamGraph with empty `node_list`, `node_map`, and `leaf_list`.
        &#34;&#34;&#34;
        self.node_list = [] # Stores nodes
        self.node_map = {}  # node list idx -&gt; node list idx
        self.leaf_list = {} # node idx in node_list that are leaf
        self.root_list = [] # node idx in node_list that are roots
        self.node_id_to_node_idx_map = {}   # node id to node idx in node_list

    def addNode(self, node: SingleOutputStreamGraphNode):
        &#34;&#34;&#34;Add a new node to the StreamGraph and update the head to reference the new node. 
        Also add the node to the list of leafs in the StreamGraph. Updates the 
        `node_id_to_node_idx_map`, and also updates `root_list` if the node is an ingest.

        Args:
            node (SingleOutputStreamGraphNode): A SingleOutputStreamGraphNode instance.

        Raises:
            ValueError: Raised if the StreamGraph is empty and the node to be added is not an ingest node.
        &#34;&#34;&#34;
        # TODO make sure the first entry is a root...maybe datastream will manage this?
        if self.empty_graph:
            if not node.isIngest():
                raise ValueError(&#34;First node inserted into StreamGraph must be an ingest node&#34;)
        
        
        self.node_list.append(node)
        self.node_head = len(self.node_list) - 1
        
        self.empty_graph = False

        if node.isIngest():
            self.root_list.append(self.node_head)
        
        self.leaf_list[self.node_head] = 1
        self.node_id_to_node_idx_map[node.node_id] = self.node_head

    def addNodeToHead(self, node: StreamGraph):
        &#34;&#34;&#34;Add a node to the StreamGraph and create an edge to the new node from the current head.

        Args:
            node (StreamGraph): The node to add to the StreamGraph DAG
        &#34;&#34;&#34;
        previous_head = self.node_head
        self.addNode(node)
        self.addEdge(previous_head, self.getHeadNodeIndex())

    def addEdge(self, node1_idx : int, node2_idx: int):
        &#34;&#34;&#34;Add an edge to the StreamGraph between the nodes referenced by the Node Index

        Args:
            node1_idx (int): Index of the source node in `node_list`
            node2_idx (int): Index of the target node in `node_list`
        &#34;&#34;&#34;
        # TODO make sure node1 exists in the self.node_map
        self.checkNodeIndexInGraph(node1_idx)
        # Make sure node2 exists in node_list
        if not self.verifyNodeExistsByIndex(node2_idx):
            raise ValueError(&#34;Node must be added to StreamGraph before adding edge.&#34;)
        self._addEdge(node1_idx, node2_idx)

    def addPlaceholderEdge(self, node1_idx : int):
        &#34;&#34;&#34;Add an edge between provided node and a placeholder node

        Args:
            node1_idx (int): Index of the source node in `node_list``
        &#34;&#34;&#34;
        # TODO make sure node1 exists in the self.node_list
        self.checkNodeIndexInGraph(node1_idx)
        self._addPlaceholderEdge(node1_idx)

    def updatePlaceholderEdge(self, node1_idx : int, node2_idx: int, edge_idx: int):
        &#34;&#34;&#34;Update an existing placeholder edge with a correct edge

        Args:
            node1_idx (int): Index of the source node in `node_list``
        &#34;&#34;&#34;
        # TODO make sure node1 exists in the self.node_list
        self.checkNodeIndexInGraph(node1_idx)
        if not self.verifyNodeExistsByIndex(node2_idx):
            raise ValueError(&#34;Node must be added to StreamGraph before adding edge.&#34;)
        self._updatePlaceholderEdge(node1_idx, node2_idx, edge_idx)

    def _addEdge(self, node1_idx: int, node2_idx: int):
        &#34;&#34;&#34;Internal function to add the edge in StreamGraph. If the source node was a leaf, it is removed from the `leaf_list`.

        Args:
            node1_idx (int): The source node index.
            node2_idx (int): The target node index.

        Raises:
            ValueError: Raised if edge already exists.
        &#34;&#34;&#34;
        if node2_idx in self.node_map[node1_idx]:
            raise ValueError(&#34;Node {target_node_name} already exists as a connecton to Node {source_node_name}&#34;
                .format(target_node_name=self.node_list[node2_idx].name, 
                        source_node_name=self.node_list[node1_idx].name)
                        )
        if self.node_list[node1_idx].isEmit():
            raise RuntimeError(&#34;Cannot add a process node to an emit node. Add a new stream root first.&#34;)
        self.node_map[node1_idx].append(node2_idx)
        self.removeIfLeaf(node1_idx)

    def _addPlaceholderEdge(self, node_idx: int):
        &#34;&#34;&#34;Internal function to add a placeholder edge in StreamGraph.

        Args:
            node1_idx (int): The source node index.

        Raises:
            ValueError: Raised if edge already exists.
        &#34;&#34;&#34;
        if self.node_list[node_idx].isEmit():
            raise RuntimeError(&#34;Cannot add a process node to an emit node. Add a new stream root first.&#34;)
        self.node_map[node_idx].append(None)

    def _updatePlaceholderEdge(self, node1_idx: int, node2_idx : int, edge_idx : int):
        &#34;&#34;&#34;Internal function to update a placeholder edge in StreamGraph.

        Args:
            node1_idx (int): The source node index.

        Raises:
            ValueError: Raised if edge already exists.
        &#34;&#34;&#34;
        if node2_idx in self.node_map[node1_idx]:
            raise ValueError(&#34;Node {target_node_name} already exists as a connecton to Node {source_node_name}&#34;
                .format(target_node_name=self.node_list[node2_idx].name, 
                        source_node_name=self.node_list[node1_idx].name)
                        )
        if self.node_list[node1_idx].isEmit():
            raise RuntimeError(&#34;Cannot add a process node to an emit node. Add a new stream root first.&#34;)
        self.node_map[node1_idx][edge_idx] = node2_idx
        self.removeIfLeaf(node1_idx)

    # Get node by the head
    def getHeadNodeIndex(self):
        &#34;&#34;&#34;Gets the index of the current head of the StreamGraph

        Returns:
            (int): The index of the current head of the StreamGraph
        &#34;&#34;&#34;
        return self.node_head

    def getNodeByIndex(self, node_idx):
        &#34;&#34;&#34;Get a node from `node_list` at the given `node_idx`

        Args:
            node_idx (int): The index of the node to retrieve from `node_list`

        Returns:
            SingleOutputStreamGraphNode: Returns the node at `node_idx` in `node_list`
        &#34;&#34;&#34;
        return self.node_list[node_idx]

    def getNodeIndexByNodeName(self, name: str):
        &#34;&#34;&#34;Get a node index from `node_list` given the name of the node and sets the current head to this node.

        Args:
            name (str): The name of the node to retrieve from `node_list`

        Raises:
            SingleOutputStreamGraphNodeDoesNotExistException: If the requested node does not exist in `node_list`

        Returns:
            int: Returns the node index with the name matching the requested name.
        &#34;&#34;&#34;
        self.setNodeHeadByName(node_name=name)
        return self.getHeadNodeIndex()

    def getNodeIndexByNodeId(self, node_id: int):
        &#34;&#34;&#34;Get a node index from `node_list` given the id of the node and sets the current head to this node.

        Args:
            node_id (int): The id of the node to retrieve from `node_list`

        Raises:
            StreamGraphNodeDoesNotExistException: If the requested node does not exist in `node_list`

        Returns:
            int: Returns the node index with the id matching the requested id.
        &#34;&#34;&#34;
        self.setNodeHeadById(node_id=node_id)
        return self.getHeadNodeIndex()
    
    def setNodeHeadByName(self, node_name: str):
        node_idx = None
        for idx, node in enumerate(self.node_list):
            if node.name == node_name:
                node_idx = idx
                break
        if node_idx is None:
            raise StreamGraphNodeDoesNotExistException(name=node_name)
        self.node_head = node_idx

    def setNodeHeadById(self, node_id: int):
        node_idx = self.node_id_to_node_idx_map.get(node_id,None)
        &#34;&#34;&#34;
        for idx, node in enumerate(self.node_list):
            if node.node_id == node_id:
                node_idx = idx
                break
        &#34;&#34;&#34;
        if node_idx is None:
            raise StreamGraphNodeDoesNotExistException(node_id==node_id)
        self.node_head = node_idx

    def checkNodeIndexInGraph(self, node_idx: int):
        &#34;&#34;&#34;Check if the given index exists in the `node_list` and in the `node_map` Map.

        Args:
            node_idx (int): The index of the node to check in `node_list`
        &#34;&#34;&#34;
        if not self.verifyNodeExistsByIndex(node_idx):
            raise ValueError(&#34;Node must be added to StreamGraph before adding edge.&#34;)
        if node_idx not in self.node_map:
            self.addVertex(node_idx)
        
    def verifyNodeExistsByIndex(self, node_idx: int):
        &#34;&#34;&#34;Check if the given  node_idx is actually inside the `node_list`

        Args:
            node_idx (int): The index of the node to check.

        Raises:
            ValueError: Raised if the size of `node_list` is smaller than the `node_idx`
        &#34;&#34;&#34;
        return len(self.node_list)-1 &gt;= node_idx

    def verifyNodeExistsById(self, node_id: int) -&gt; bool:
        &#34;&#34;&#34;Verifies if a node with the provided `node_id` exists in the StreamGraph.

        Args:
            node_id (int): The node id to check.

        Returns:
            (bool): Whether the desired node exists
        &#34;&#34;&#34;
        return node_id in self.node_id_to_node_idx_map

    def verifyNodeExistsByName(self, node_name: str) -&gt; bool:
        &#34;&#34;&#34;Verifies if a node with the provided `name` exists in the StreamGraph.

        Args:
            node_name (str): The node name to check

        Returns:
            bool: Whether the desired node exists
        &#34;&#34;&#34;
        node_idx = None
        for idx, node in enumerate(self.node_list):
            if node.name == node_name:
                return True
        return False

    def addVertex(self, node_idx: int):
        &#34;&#34;&#34;Adds a `node_idx` to the `node_map` with an empty edge list.

        Args:
            node_idx (int): The index of the node to add to the `node_map`
        &#34;&#34;&#34;
        self.node_map[node_idx] = []


    def isLeaf(self, node_idx: int) -&gt; bool:
        &#34;&#34;&#34;Checks if the given index is of a leaf node.

        Args:
            node_idx (int): The node index to check

        Returns:
            (bool): Returns if `node_idx` refers to a leaf node.
        &#34;&#34;&#34;
        return node_idx in self.leaf_list

    def removeIfLeaf(self, node_idx: int):
        &#34;&#34;&#34;Remove a node from `leaf_list` if it is a leaf.

        Args:
            node_idx (int): The node index to remove.
        &#34;&#34;&#34;
        if self.isLeaf(node_idx=node_idx):
            self.deleteLeaf(node_idx=node_idx)

    def deleteLeaf(self, node_idx: int):
        &#34;&#34;&#34;Remove a leaf node from `leaf_list`

        Args:
            node_idx (int): The node index to remove.
        &#34;&#34;&#34;
        self.leaf_list.pop(node_idx)

    def verifyGraph(self) -&gt; bool:
        &#34;&#34;&#34;Verify the graph, ensuring all leaf nodes are Emit Nodes.

        Returns:
            bool: Returns True if the StreamGraph is a valid stream graph.
        &#34;&#34;&#34;
        leaf_verify = True
        for node_idx in self.leaf_list:
            if not self.node_list[node_idx].isEmit():
                leaf_verify = False

        return leaf_verify


    # Node operations
    def setNodeNameById(self, node_id : int, node_name: str):
        &#34;&#34;&#34;Sets the name of a node, referenced by the node id.

        Args:
            node_id (int): The node id to target
            node_name (str): The new name for this node
        &#34;&#34;&#34;
        self.setNodeNameByIndex(node_index=self.getNodeIndexByNodeId(node_id=node_id), node_name=node_name)

    def setNodeNameOfHead(self, node_name: str):
        &#34;&#34;&#34;Set the name of the head node.

        Args:
            node_name (str): The new name for the head node
        &#34;&#34;&#34;
        self.setNodeNameByIndex(self.getHeadNodeIndex(), node_name=node_name)
    
    def setNodeNameByIndex(self, node_index : int, node_name: str):
        &#34;&#34;&#34;Sets the name of a node, referenced by the node index.

        Args:
            node_index (int): The node index to target
            node_name (str): The new name for this node
        &#34;&#34;&#34;
        self.node_list[node_index].setName(node_name)

    def getNodeNameById(self, node_id: int) -&gt; str:
        &#34;&#34;&#34;Get the name of a node referenced by the node id

        Args:
            node_id (int): The id of the target node.

        Returns:
            str: The name of the node
        &#34;&#34;&#34;
        return self.getNodeNameByIndex(self.getNodeIndexByNodeId(node_id=node_id))

    def getNodeNameOfHead(self) -&gt; str:
        &#34;&#34;&#34;Get the name of the head node

        Returns:
            str: [description]
        &#34;&#34;&#34;
        return self.getNodeNameByIndex(self.getHeadNodeIndex())

    def getNodeNameByIndex(self, node_index: int) -&gt; str:
        &#34;&#34;&#34;Get the name of a node referenced by the node indedx

        Args:
            node_index (int): The index of the target node.

        Returns:
            str: The name of the node
        &#34;&#34;&#34;
        return self.node_list[node_index].getName()


    def getHeadNode(self) -&gt; SingleOutputStreamGraphNode:
        &#34;&#34;&#34;Get the current head node.

        Returns:
            SingleOutputStreamGraphNode: The desired node
        &#34;&#34;&#34;
        return self.node_list[self.node_head]
    
    def getNodeByIndex(self, node_index : int) -&gt; SingleOutputStreamGraphNode:
        &#34;&#34;&#34;Get a node referenced by the node index

        Args:
            node_index (int): The index of the node to retrieve

        Returns:
            SingleOutputStreamGraphNode: The desired node
        &#34;&#34;&#34;
        return self.node_list[node_index]

    def getNodeById(self, node_id : int) -&gt; SingleOutputStreamGraphNode:
        &#34;&#34;&#34;Get a node referenced by the node id

        Args:
            node_id (int): The id of the node to retrieve

        Returns:
            SingleOutputStreamGraphNode: The desired node
        &#34;&#34;&#34;
        return self.getNodeByIndex(self.getNodeIndexByNodeId(node_id=node_id))

    def getNodeByName(self, node_name: str) -&gt; SingleOutputStreamGraphNode:
        &#34;&#34;&#34;Get a node referenced by the node name

        Args:
            node_name (str): The name of the node to retrieve

        Returns:
            SingleOutputStreamGraphNode: The desired node
        &#34;&#34;&#34;
        return self.getNodeByIndex(self.getNodeIndexByNodeName(node_name))

    
    def getEdgesForNodeId(self, node_id: int) -&gt; List[int]:
        &#34;&#34;&#34;Gets the edges for a node referencced by the node id

        Args:
            node_id (int): The id of the node to get the edges for.

        Returns:
            List[int]: The list of target nodes of this source node.
        &#34;&#34;&#34;
        return self.getEdgesForNodeIdx(self.getNodeIndexByNodeId(node_id))

    def getEdgesForNodeIdx(self, node_idx: int) -&gt; List[int]:
        &#34;&#34;&#34;Gets the edges for a node referencced by the node index

        Args:
            node_idx (int): The index of the node to get the edges for.

        Returns:
            List[int]: The list of target nodes of this source node.
        &#34;&#34;&#34;
        return self.node_map.get(node_idx,[])</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.empty_graph"><code class="name">var <span class="ident">empty_graph</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.leaf_list"><code class="name">var <span class="ident">leaf_list</span> : Dict[int, int]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_head"><code class="name">var <span class="ident">node_head</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_id_to_node_idx_map"><code class="name">var <span class="ident">node_id_to_node_idx_map</span> : Dict[int, int]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_list"><code class="name">var <span class="ident">node_list</span> : List[<a title="edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode" href="SingleOutputStreamGraphNode.html#edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode">SingleOutputStreamGraphNode</a>]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_map"><code class="name">var <span class="ident">node_map</span> : Dict[int, List[int]]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.root_list"><code class="name">var <span class="ident">root_list</span> : List[int]</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addEdge"><code class="name flex">
<span>def <span class="ident">addEdge</span></span>(<span>self, node1_idx: int, node2_idx: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Add an edge to the StreamGraph between the nodes referenced by the Node Index</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node1_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>Index of the source node in <code>node_list</code></dd>
<dt><strong><code>node2_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>Index of the target node in <code>node_list</code></dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addEdge(self, node1_idx : int, node2_idx: int):
    &#34;&#34;&#34;Add an edge to the StreamGraph between the nodes referenced by the Node Index

    Args:
        node1_idx (int): Index of the source node in `node_list`
        node2_idx (int): Index of the target node in `node_list`
    &#34;&#34;&#34;
    # TODO make sure node1 exists in the self.node_map
    self.checkNodeIndexInGraph(node1_idx)
    # Make sure node2 exists in node_list
    if not self.verifyNodeExistsByIndex(node2_idx):
        raise ValueError(&#34;Node must be added to StreamGraph before adding edge.&#34;)
    self._addEdge(node1_idx, node2_idx)</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addNode"><code class="name flex">
<span>def <span class="ident">addNode</span></span>(<span>self, node: SingleOutputStreamGraphNode)</span>
</code></dt>
<dd>
<div class="desc"><p>Add a new node to the StreamGraph and update the head to reference the new node.
Also add the node to the list of leafs in the StreamGraph. Updates the
<code>node_id_to_node_idx_map</code>, and also updates <code>root_list</code> if the node is an ingest.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node</code></strong> :&ensp;<code>SingleOutputStreamGraphNode</code></dt>
<dd>A SingleOutputStreamGraphNode instance.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>Raised if the StreamGraph is empty and the node to be added is not an ingest node.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addNode(self, node: SingleOutputStreamGraphNode):
    &#34;&#34;&#34;Add a new node to the StreamGraph and update the head to reference the new node. 
    Also add the node to the list of leafs in the StreamGraph. Updates the 
    `node_id_to_node_idx_map`, and also updates `root_list` if the node is an ingest.

    Args:
        node (SingleOutputStreamGraphNode): A SingleOutputStreamGraphNode instance.

    Raises:
        ValueError: Raised if the StreamGraph is empty and the node to be added is not an ingest node.
    &#34;&#34;&#34;
    # TODO make sure the first entry is a root...maybe datastream will manage this?
    if self.empty_graph:
        if not node.isIngest():
            raise ValueError(&#34;First node inserted into StreamGraph must be an ingest node&#34;)
    
    
    self.node_list.append(node)
    self.node_head = len(self.node_list) - 1
    
    self.empty_graph = False

    if node.isIngest():
        self.root_list.append(self.node_head)
    
    self.leaf_list[self.node_head] = 1
    self.node_id_to_node_idx_map[node.node_id] = self.node_head</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addNodeToHead"><code class="name flex">
<span>def <span class="ident">addNodeToHead</span></span>(<span>self, node: <a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph">StreamGraph</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Add a node to the StreamGraph and create an edge to the new node from the current head.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node</code></strong> :&ensp;<code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph">StreamGraph</a></code></dt>
<dd>The node to add to the StreamGraph DAG</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addNodeToHead(self, node: StreamGraph):
    &#34;&#34;&#34;Add a node to the StreamGraph and create an edge to the new node from the current head.

    Args:
        node (StreamGraph): The node to add to the StreamGraph DAG
    &#34;&#34;&#34;
    previous_head = self.node_head
    self.addNode(node)
    self.addEdge(previous_head, self.getHeadNodeIndex())</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addPlaceholderEdge"><code class="name flex">
<span>def <span class="ident">addPlaceholderEdge</span></span>(<span>self, node1_idx: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Add an edge between provided node and a placeholder node</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node1_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>Index of the source node in `node_list``</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addPlaceholderEdge(self, node1_idx : int):
    &#34;&#34;&#34;Add an edge between provided node and a placeholder node

    Args:
        node1_idx (int): Index of the source node in `node_list``
    &#34;&#34;&#34;
    # TODO make sure node1 exists in the self.node_list
    self.checkNodeIndexInGraph(node1_idx)
    self._addPlaceholderEdge(node1_idx)</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addVertex"><code class="name flex">
<span>def <span class="ident">addVertex</span></span>(<span>self, node_idx: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a <code>node_idx</code> to the <code>node_map</code> with an empty edge list.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>The index of the node to add to the <code>node_map</code></dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def addVertex(self, node_idx: int):
    &#34;&#34;&#34;Adds a `node_idx` to the `node_map` with an empty edge list.

    Args:
        node_idx (int): The index of the node to add to the `node_map`
    &#34;&#34;&#34;
    self.node_map[node_idx] = []</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.checkNodeIndexInGraph"><code class="name flex">
<span>def <span class="ident">checkNodeIndexInGraph</span></span>(<span>self, node_idx: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Check if the given index exists in the <code>node_list</code> and in the <code>node_map</code> Map.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>The index of the node to check in <code>node_list</code></dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def checkNodeIndexInGraph(self, node_idx: int):
    &#34;&#34;&#34;Check if the given index exists in the `node_list` and in the `node_map` Map.

    Args:
        node_idx (int): The index of the node to check in `node_list`
    &#34;&#34;&#34;
    if not self.verifyNodeExistsByIndex(node_idx):
        raise ValueError(&#34;Node must be added to StreamGraph before adding edge.&#34;)
    if node_idx not in self.node_map:
        self.addVertex(node_idx)</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.deleteLeaf"><code class="name flex">
<span>def <span class="ident">deleteLeaf</span></span>(<span>self, node_idx: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Remove a leaf node from <code>leaf_list</code></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>The node index to remove.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def deleteLeaf(self, node_idx: int):
    &#34;&#34;&#34;Remove a leaf node from `leaf_list`

    Args:
        node_idx (int): The node index to remove.
    &#34;&#34;&#34;
    self.leaf_list.pop(node_idx)</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getEdgesForNodeId"><code class="name flex">
<span>def <span class="ident">getEdgesForNodeId</span></span>(<span>self, node_id: int) ‑> List[int]</span>
</code></dt>
<dd>
<div class="desc"><p>Gets the edges for a node referencced by the node id</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_id</code></strong> :&ensp;<code>int</code></dt>
<dd>The id of the node to get the edges for.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>List[int]</code></dt>
<dd>The list of target nodes of this source node.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getEdgesForNodeId(self, node_id: int) -&gt; List[int]:
    &#34;&#34;&#34;Gets the edges for a node referencced by the node id

    Args:
        node_id (int): The id of the node to get the edges for.

    Returns:
        List[int]: The list of target nodes of this source node.
    &#34;&#34;&#34;
    return self.getEdgesForNodeIdx(self.getNodeIndexByNodeId(node_id))</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getEdgesForNodeIdx"><code class="name flex">
<span>def <span class="ident">getEdgesForNodeIdx</span></span>(<span>self, node_idx: int) ‑> List[int]</span>
</code></dt>
<dd>
<div class="desc"><p>Gets the edges for a node referencced by the node index</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>The index of the node to get the edges for.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>List[int]</code></dt>
<dd>The list of target nodes of this source node.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getEdgesForNodeIdx(self, node_idx: int) -&gt; List[int]:
    &#34;&#34;&#34;Gets the edges for a node referencced by the node index

    Args:
        node_idx (int): The index of the node to get the edges for.

    Returns:
        List[int]: The list of target nodes of this source node.
    &#34;&#34;&#34;
    return self.node_map.get(node_idx,[])</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getHeadNode"><code class="name flex">
<span>def <span class="ident">getHeadNode</span></span>(<span>self) ‑> <a title="edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode" href="SingleOutputStreamGraphNode.html#edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode">SingleOutputStreamGraphNode</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get the current head node.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>SingleOutputStreamGraphNode</code></dt>
<dd>The desired node</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getHeadNode(self) -&gt; SingleOutputStreamGraphNode:
    &#34;&#34;&#34;Get the current head node.

    Returns:
        SingleOutputStreamGraphNode: The desired node
    &#34;&#34;&#34;
    return self.node_list[self.node_head]</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getHeadNodeIndex"><code class="name flex">
<span>def <span class="ident">getHeadNodeIndex</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets the index of the current head of the StreamGraph</p>
<h2 id="returns">Returns</h2>
<p>(int): The index of the current head of the StreamGraph</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getHeadNodeIndex(self):
    &#34;&#34;&#34;Gets the index of the current head of the StreamGraph

    Returns:
        (int): The index of the current head of the StreamGraph
    &#34;&#34;&#34;
    return self.node_head</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeById"><code class="name flex">
<span>def <span class="ident">getNodeById</span></span>(<span>self, node_id: int) ‑> <a title="edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode" href="SingleOutputStreamGraphNode.html#edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode">SingleOutputStreamGraphNode</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get a node referenced by the node id</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_id</code></strong> :&ensp;<code>int</code></dt>
<dd>The id of the node to retrieve</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>SingleOutputStreamGraphNode</code></dt>
<dd>The desired node</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getNodeById(self, node_id : int) -&gt; SingleOutputStreamGraphNode:
    &#34;&#34;&#34;Get a node referenced by the node id

    Args:
        node_id (int): The id of the node to retrieve

    Returns:
        SingleOutputStreamGraphNode: The desired node
    &#34;&#34;&#34;
    return self.getNodeByIndex(self.getNodeIndexByNodeId(node_id=node_id))</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeByIndex"><code class="name flex">
<span>def <span class="ident">getNodeByIndex</span></span>(<span>self, node_index: int) ‑> <a title="edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode" href="SingleOutputStreamGraphNode.html#edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode">SingleOutputStreamGraphNode</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get a node referenced by the node index</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_index</code></strong> :&ensp;<code>int</code></dt>
<dd>The index of the node to retrieve</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>SingleOutputStreamGraphNode</code></dt>
<dd>The desired node</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getNodeByIndex(self, node_index : int) -&gt; SingleOutputStreamGraphNode:
    &#34;&#34;&#34;Get a node referenced by the node index

    Args:
        node_index (int): The index of the node to retrieve

    Returns:
        SingleOutputStreamGraphNode: The desired node
    &#34;&#34;&#34;
    return self.node_list[node_index]</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeByName"><code class="name flex">
<span>def <span class="ident">getNodeByName</span></span>(<span>self, node_name: str) ‑> <a title="edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode" href="SingleOutputStreamGraphNode.html#edna.core.plans.streamgraph.SingleOutputStreamGraphNode.SingleOutputStreamGraphNode">SingleOutputStreamGraphNode</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get a node referenced by the node name</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the node to retrieve</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>SingleOutputStreamGraphNode</code></dt>
<dd>The desired node</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getNodeByName(self, node_name: str) -&gt; SingleOutputStreamGraphNode:
    &#34;&#34;&#34;Get a node referenced by the node name

    Args:
        node_name (str): The name of the node to retrieve

    Returns:
        SingleOutputStreamGraphNode: The desired node
    &#34;&#34;&#34;
    return self.getNodeByIndex(self.getNodeIndexByNodeName(node_name))</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeIndexByNodeId"><code class="name flex">
<span>def <span class="ident">getNodeIndexByNodeId</span></span>(<span>self, node_id: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a node index from <code>node_list</code> given the id of the node and sets the current head to this node.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_id</code></strong> :&ensp;<code>int</code></dt>
<dd>The id of the node to retrieve from <code>node_list</code></dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>StreamGraphNodeDoesNotExistException</code></dt>
<dd>If the requested node does not exist in <code>node_list</code></dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>int</code></dt>
<dd>Returns the node index with the id matching the requested id.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getNodeIndexByNodeId(self, node_id: int):
    &#34;&#34;&#34;Get a node index from `node_list` given the id of the node and sets the current head to this node.

    Args:
        node_id (int): The id of the node to retrieve from `node_list`

    Raises:
        StreamGraphNodeDoesNotExistException: If the requested node does not exist in `node_list`

    Returns:
        int: Returns the node index with the id matching the requested id.
    &#34;&#34;&#34;
    self.setNodeHeadById(node_id=node_id)
    return self.getHeadNodeIndex()</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeIndexByNodeName"><code class="name flex">
<span>def <span class="ident">getNodeIndexByNodeName</span></span>(<span>self, name: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a node index from <code>node_list</code> given the name of the node and sets the current head to this node.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the node to retrieve from <code>node_list</code></dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>SingleOutputStreamGraphNodeDoesNotExistException</code></dt>
<dd>If the requested node does not exist in <code>node_list</code></dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>int</code></dt>
<dd>Returns the node index with the name matching the requested name.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getNodeIndexByNodeName(self, name: str):
    &#34;&#34;&#34;Get a node index from `node_list` given the name of the node and sets the current head to this node.

    Args:
        name (str): The name of the node to retrieve from `node_list`

    Raises:
        SingleOutputStreamGraphNodeDoesNotExistException: If the requested node does not exist in `node_list`

    Returns:
        int: Returns the node index with the name matching the requested name.
    &#34;&#34;&#34;
    self.setNodeHeadByName(node_name=name)
    return self.getHeadNodeIndex()</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeNameById"><code class="name flex">
<span>def <span class="ident">getNodeNameById</span></span>(<span>self, node_id: int) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Get the name of a node referenced by the node id</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_id</code></strong> :&ensp;<code>int</code></dt>
<dd>The id of the target node.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The name of the node</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getNodeNameById(self, node_id: int) -&gt; str:
    &#34;&#34;&#34;Get the name of a node referenced by the node id

    Args:
        node_id (int): The id of the target node.

    Returns:
        str: The name of the node
    &#34;&#34;&#34;
    return self.getNodeNameByIndex(self.getNodeIndexByNodeId(node_id=node_id))</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeNameByIndex"><code class="name flex">
<span>def <span class="ident">getNodeNameByIndex</span></span>(<span>self, node_index: int) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Get the name of a node referenced by the node indedx</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_index</code></strong> :&ensp;<code>int</code></dt>
<dd>The index of the target node.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The name of the node</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getNodeNameByIndex(self, node_index: int) -&gt; str:
    &#34;&#34;&#34;Get the name of a node referenced by the node indedx

    Args:
        node_index (int): The index of the target node.

    Returns:
        str: The name of the node
    &#34;&#34;&#34;
    return self.node_list[node_index].getName()</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeNameOfHead"><code class="name flex">
<span>def <span class="ident">getNodeNameOfHead</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Get the name of the head node</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>[description]</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getNodeNameOfHead(self) -&gt; str:
    &#34;&#34;&#34;Get the name of the head node

    Returns:
        str: [description]
    &#34;&#34;&#34;
    return self.getNodeNameByIndex(self.getHeadNodeIndex())</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.isLeaf"><code class="name flex">
<span>def <span class="ident">isLeaf</span></span>(<span>self, node_idx: int) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Checks if the given index is of a leaf node.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>The node index to check</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>(bool): Returns if <code>node_idx</code> refers to a leaf node.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def isLeaf(self, node_idx: int) -&gt; bool:
    &#34;&#34;&#34;Checks if the given index is of a leaf node.

    Args:
        node_idx (int): The node index to check

    Returns:
        (bool): Returns if `node_idx` refers to a leaf node.
    &#34;&#34;&#34;
    return node_idx in self.leaf_list</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.removeIfLeaf"><code class="name flex">
<span>def <span class="ident">removeIfLeaf</span></span>(<span>self, node_idx: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Remove a node from <code>leaf_list</code> if it is a leaf.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>The node index to remove.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def removeIfLeaf(self, node_idx: int):
    &#34;&#34;&#34;Remove a node from `leaf_list` if it is a leaf.

    Args:
        node_idx (int): The node index to remove.
    &#34;&#34;&#34;
    if self.isLeaf(node_idx=node_idx):
        self.deleteLeaf(node_idx=node_idx)</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeHeadById"><code class="name flex">
<span>def <span class="ident">setNodeHeadById</span></span>(<span>self, node_id: int)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setNodeHeadById(self, node_id: int):
    node_idx = self.node_id_to_node_idx_map.get(node_id,None)
    &#34;&#34;&#34;
    for idx, node in enumerate(self.node_list):
        if node.node_id == node_id:
            node_idx = idx
            break
    &#34;&#34;&#34;
    if node_idx is None:
        raise StreamGraphNodeDoesNotExistException(node_id==node_id)
    self.node_head = node_idx</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeHeadByName"><code class="name flex">
<span>def <span class="ident">setNodeHeadByName</span></span>(<span>self, node_name: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setNodeHeadByName(self, node_name: str):
    node_idx = None
    for idx, node in enumerate(self.node_list):
        if node.name == node_name:
            node_idx = idx
            break
    if node_idx is None:
        raise StreamGraphNodeDoesNotExistException(name=node_name)
    self.node_head = node_idx</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeNameById"><code class="name flex">
<span>def <span class="ident">setNodeNameById</span></span>(<span>self, node_id: int, node_name: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the name of a node, referenced by the node id.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_id</code></strong> :&ensp;<code>int</code></dt>
<dd>The node id to target</dd>
<dt><strong><code>node_name</code></strong> :&ensp;<code>str</code></dt>
<dd>The new name for this node</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setNodeNameById(self, node_id : int, node_name: str):
    &#34;&#34;&#34;Sets the name of a node, referenced by the node id.

    Args:
        node_id (int): The node id to target
        node_name (str): The new name for this node
    &#34;&#34;&#34;
    self.setNodeNameByIndex(node_index=self.getNodeIndexByNodeId(node_id=node_id), node_name=node_name)</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeNameByIndex"><code class="name flex">
<span>def <span class="ident">setNodeNameByIndex</span></span>(<span>self, node_index: int, node_name: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the name of a node, referenced by the node index.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_index</code></strong> :&ensp;<code>int</code></dt>
<dd>The node index to target</dd>
<dt><strong><code>node_name</code></strong> :&ensp;<code>str</code></dt>
<dd>The new name for this node</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setNodeNameByIndex(self, node_index : int, node_name: str):
    &#34;&#34;&#34;Sets the name of a node, referenced by the node index.

    Args:
        node_index (int): The node index to target
        node_name (str): The new name for this node
    &#34;&#34;&#34;
    self.node_list[node_index].setName(node_name)</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeNameOfHead"><code class="name flex">
<span>def <span class="ident">setNodeNameOfHead</span></span>(<span>self, node_name: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Set the name of the head node.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_name</code></strong> :&ensp;<code>str</code></dt>
<dd>The new name for the head node</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setNodeNameOfHead(self, node_name: str):
    &#34;&#34;&#34;Set the name of the head node.

    Args:
        node_name (str): The new name for the head node
    &#34;&#34;&#34;
    self.setNodeNameByIndex(self.getHeadNodeIndex(), node_name=node_name)</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.updatePlaceholderEdge"><code class="name flex">
<span>def <span class="ident">updatePlaceholderEdge</span></span>(<span>self, node1_idx: int, node2_idx: int, edge_idx: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Update an existing placeholder edge with a correct edge</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node1_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>Index of the source node in `node_list``</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def updatePlaceholderEdge(self, node1_idx : int, node2_idx: int, edge_idx: int):
    &#34;&#34;&#34;Update an existing placeholder edge with a correct edge

    Args:
        node1_idx (int): Index of the source node in `node_list``
    &#34;&#34;&#34;
    # TODO make sure node1 exists in the self.node_list
    self.checkNodeIndexInGraph(node1_idx)
    if not self.verifyNodeExistsByIndex(node2_idx):
        raise ValueError(&#34;Node must be added to StreamGraph before adding edge.&#34;)
    self._updatePlaceholderEdge(node1_idx, node2_idx, edge_idx)</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyGraph"><code class="name flex">
<span>def <span class="ident">verifyGraph</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Verify the graph, ensuring all leaf nodes are Emit Nodes.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>Returns True if the StreamGraph is a valid stream graph.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def verifyGraph(self) -&gt; bool:
    &#34;&#34;&#34;Verify the graph, ensuring all leaf nodes are Emit Nodes.

    Returns:
        bool: Returns True if the StreamGraph is a valid stream graph.
    &#34;&#34;&#34;
    leaf_verify = True
    for node_idx in self.leaf_list:
        if not self.node_list[node_idx].isEmit():
            leaf_verify = False

    return leaf_verify</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyNodeExistsById"><code class="name flex">
<span>def <span class="ident">verifyNodeExistsById</span></span>(<span>self, node_id: int) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Verifies if a node with the provided <code>node_id</code> exists in the StreamGraph.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_id</code></strong> :&ensp;<code>int</code></dt>
<dd>The node id to check.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>(bool): Whether the desired node exists</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def verifyNodeExistsById(self, node_id: int) -&gt; bool:
    &#34;&#34;&#34;Verifies if a node with the provided `node_id` exists in the StreamGraph.

    Args:
        node_id (int): The node id to check.

    Returns:
        (bool): Whether the desired node exists
    &#34;&#34;&#34;
    return node_id in self.node_id_to_node_idx_map</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyNodeExistsByIndex"><code class="name flex">
<span>def <span class="ident">verifyNodeExistsByIndex</span></span>(<span>self, node_idx: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Check if the given
node_idx is actually inside the <code>node_list</code></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_idx</code></strong> :&ensp;<code>int</code></dt>
<dd>The index of the node to check.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>Raised if the size of <code>node_list</code> is smaller than the <code>node_idx</code></dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def verifyNodeExistsByIndex(self, node_idx: int):
    &#34;&#34;&#34;Check if the given  node_idx is actually inside the `node_list`

    Args:
        node_idx (int): The index of the node to check.

    Raises:
        ValueError: Raised if the size of `node_list` is smaller than the `node_idx`
    &#34;&#34;&#34;
    return len(self.node_list)-1 &gt;= node_idx</code></pre>
</details>
</dd>
<dt id="edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyNodeExistsByName"><code class="name flex">
<span>def <span class="ident">verifyNodeExistsByName</span></span>(<span>self, node_name: str) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Verifies if a node with the provided <code>name</code> exists in the StreamGraph.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>node_name</code></strong> :&ensp;<code>str</code></dt>
<dd>The node name to check</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>Whether the desired node exists</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def verifyNodeExistsByName(self, node_name: str) -&gt; bool:
    &#34;&#34;&#34;Verifies if a node with the provided `name` exists in the StreamGraph.

    Args:
        node_name (str): The node name to check

    Returns:
        bool: Whether the desired node exists
    &#34;&#34;&#34;
    node_idx = None
    for idx, node in enumerate(self.node_list):
        if node.name == node_name:
            return True
    return False</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="edna.core.plans.streamgraph" href="index.html">edna.core.plans.streamgraph</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph">StreamGraph</a></code></h4>
<ul class="">
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addEdge" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.addEdge">addEdge</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addNode" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.addNode">addNode</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addNodeToHead" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.addNodeToHead">addNodeToHead</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addPlaceholderEdge" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.addPlaceholderEdge">addPlaceholderEdge</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.addVertex" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.addVertex">addVertex</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.checkNodeIndexInGraph" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.checkNodeIndexInGraph">checkNodeIndexInGraph</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.deleteLeaf" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.deleteLeaf">deleteLeaf</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.empty_graph" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.empty_graph">empty_graph</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getEdgesForNodeId" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getEdgesForNodeId">getEdgesForNodeId</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getEdgesForNodeIdx" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getEdgesForNodeIdx">getEdgesForNodeIdx</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getHeadNode" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getHeadNode">getHeadNode</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getHeadNodeIndex" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getHeadNodeIndex">getHeadNodeIndex</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeById" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeById">getNodeById</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeByIndex" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeByIndex">getNodeByIndex</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeByName" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeByName">getNodeByName</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeIndexByNodeId" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeIndexByNodeId">getNodeIndexByNodeId</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeIndexByNodeName" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeIndexByNodeName">getNodeIndexByNodeName</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeNameById" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeNameById">getNodeNameById</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeNameByIndex" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeNameByIndex">getNodeNameByIndex</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeNameOfHead" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.getNodeNameOfHead">getNodeNameOfHead</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.isLeaf" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.isLeaf">isLeaf</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.leaf_list" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.leaf_list">leaf_list</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_head" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_head">node_head</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_id_to_node_idx_map" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_id_to_node_idx_map">node_id_to_node_idx_map</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_list" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_list">node_list</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_map" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.node_map">node_map</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.removeIfLeaf" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.removeIfLeaf">removeIfLeaf</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.root_list" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.root_list">root_list</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeHeadById" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeHeadById">setNodeHeadById</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeHeadByName" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeHeadByName">setNodeHeadByName</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeNameById" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeNameById">setNodeNameById</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeNameByIndex" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeNameByIndex">setNodeNameByIndex</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeNameOfHead" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.setNodeNameOfHead">setNodeNameOfHead</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.updatePlaceholderEdge" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.updatePlaceholderEdge">updatePlaceholderEdge</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyGraph" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyGraph">verifyGraph</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyNodeExistsById" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyNodeExistsById">verifyNodeExistsById</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyNodeExistsByIndex" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyNodeExistsByIndex">verifyNodeExistsByIndex</a></code></li>
<li><code><a title="edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyNodeExistsByName" href="#edna.core.plans.streamgraph.StreamGraph.StreamGraph.verifyNodeExistsByName">verifyNodeExistsByName</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>